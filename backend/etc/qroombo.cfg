*** GENERAL ****
admin = tobi@oetiker.ch,doris@oetiker.ch
mojo_secret = very_secret_cookie_secret
log_file = /tmp/qroombo.log
log_level = debug
database_dir = /tmp/qroombo

*** RESERVATION ***
first_hour = 7
last_hour = 23

+EXTRA_FIELDS_PL
[
  {
    key => 'horytarif',
    label => 'Horyzon Tarif',
    widget => 'checkBox',
    set => {
        label => '+1 CHF pro Mietstunde zu gunsten von Horyzon',        
    }
  },
  {
    key => 'tarif',
    label => 'Tarif',
    widget => 'selectBox',
  }
]

+SELECTBOX_CFG_PL
my $ret = [
    { key => 'noprof', title => 'Non Profit Tarif' },
    { key => 'normal', title => 'Normaltarif' },     
];
if ($address{allow_free}){
      unshift @$ret, { key => 'free', title => 'Gratis Nutzung' };   
}

return {
      tarif => $ret
};

*** USER ***
+EXTRA_FIELDS_PL

*** ADDRESS ***

+EXTRA_FIELDS_PL
[  
  {
    key => 'allow_free',
    label => 'Gratis',
    widget => 'checkBox',
    set => {
        label => 'Gratis Miete erlauben',
    },
    write => 'admin'
  }
]

*** ROOM ***
+PRICE_PL
if ($address{allow_free} and $reservation{tarif} eq 'free'){
    return 0;
}
my $price = $reservation{duration} * $room{price_norm};
if ($reservation{tarif} eq 'noprof'){
    $price = $reservation{duration} * $room{price_noprof};
}
$price = 100 if $price < 100;
return $price;

*** ROOM:salon ***
name = Salon
m_2 = 65
description = Grosser Raum mit Garten Zugang

+DATA_PL
return { 
   price_norm => 15,
   price_noprof => 25 
}

*** ROOM:sitz ***
name = Sitzungszimmer
m_2 = 12
description = Kleiner Besprechungsraum

+DATA_PL
return { 
   price_norm => 20,
   price_noprof => 35 
}

